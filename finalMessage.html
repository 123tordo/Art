<script src="https://cdn.rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const videoElement = document.getElementById('video');

        // Check if Instascan is available
        if (Instascan.Camera.getCameras().length > 0) {
            const scanner = new Instascan.Scanner({ video: videoElement });

            Instascan.Camera.getCameras().then(cameras => {
                if (cameras.length > 1) {
                    scanner.start(cameras[1]); // Use the back camera (assuming it's the second camera in the list)
                } else {
                    scanner.start(cameras[0]); // Use the only available camera
                }
            }).catch(error => {
                console.error('Error getting cameras:', error);
            });

            scanner.addListener('scan', function (content) {
                alert('Scanned: ' + content);
                // You can navigate to the destination site here
                // window.location.href = content;
            });
        } else {
            console.error('Instascan is not available');
        }
    });
</script>
